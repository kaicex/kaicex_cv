# üöÄ Performance Optimization Guide

## –¢–µ–∫—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### –í–∏–¥–µ–æ
- ‚úì `preload="metadata"` - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚úì `muted` - –ø–æ–∑–≤–æ–ª—è–µ—Ç autoplay –±–µ–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- ‚úì Lazy initialization - –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úì –ü–æ–¥–¥–µ—Ä–∂–∫–∞ poster images - –±—ã—Å—Ç—Ä–æ–µ –ø—Ä–µ–≤—å—é

#### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úì `loading="lazy"` - –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- ‚úì `decoding="async"` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∫–∞
- ‚úì –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –≤ URL (Prismic CDN)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úì CSS —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 2 —Ñ–∞–π–ª–∞ (main + components)
- ‚úì JavaScript –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
- ‚úì –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (Astro)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:
```
Layout.astro:      4KB  (59 —Å—Ç—Ä–æ–∫)
main.css:          4KB  (253 —Å—Ç—Ä–æ–∫–∏)
components.css:    16KB (698 —Å—Ç—Ä–æ–∫)
main.js:           128KB (85 —Å—Ç—Ä–æ–∫ + WebGL –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
```

### –ó–∞–≥—Ä—É–∑–∫–∞:
- **First Contentful Paint**: ~1.2s
- **Time to Interactive**: ~2.5s
- **Total Bundle Size**: ~152KB (–±–µ–∑ –º–µ–¥–∏–∞)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å poster images
```json
{
  "mediaSrc": "https://video.mp4",
  "posterSrc": "https://poster.jpg"  // ‚Üê –î–æ–±–∞–≤–∏—Ç—å
}
```

### 2. Code Splitting –¥–ª—è main.js
–†–∞–∑–±–∏—Ç—å WebGL –±–∏–±–ª–∏–æ—Ç–µ–∫—É –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ chunks:
```js
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
const webgl = await import('./webgl-lib.js');
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Astro Image
```bash
npm install @astrojs/image
```

### 4. –î–æ–±–∞–≤–∏—Ç—å Service Worker
–î–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

### 5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `font-display: swap`
- Preload –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤
- Subset —à—Ä–∏—Ñ—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã)

---

## üîß –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Lighthouse
```bash
npm run build
npm run preview
# –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Lighthouse ‚Üí Analyze
```

### WebPageTest
https://www.webpagetest.org/

### Chrome DevTools
- Network tab - —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
- Performance tab - –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- Coverage tab - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥

---

## üìà –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å |
|---------|---------|------|
| FCP | ~1.2s | <1s |
| LCP | ~2.5s | <2.5s |
| TTI | ~2.5s | <3s |
| CLS | 0 | 0 |
| Bundle Size | 152KB | <150KB |

---

## üí° Quick Wins

1. **–î–æ–±–∞–≤–∏—Ç—å poster images** - —É–ª—É—á—à–∏—Ç LCP –Ω–∞ 30%
2. **Preload —à—Ä–∏—Ñ—Ç–æ–≤** - —É–ª—É—á—à–∏—Ç FCP –Ω–∞ 20%
3. **–ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å main.js** - —É–º–µ–Ω—å—à–∏—Ç —Ä–∞–∑–º–µ—Ä –Ω–∞ 40%
4. **–î–æ–±–∞–≤–∏—Ç—å compression** (gzip/brotli) - —É–º–µ–Ω—å—à–∏—Ç transfer –Ω–∞ 70%

---

## üé® –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
- **WebP** –¥–ª—è —Ñ–æ—Ç–æ (–º–µ–Ω—å—à–µ –Ω–∞ 30%)
- **AVIF** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è (–º–µ–Ω—å—à–µ –Ω–∞ 50%)
- **SVG** –¥–ª—è –∏–∫–æ–Ω–æ–∫ –∏ –ª–æ–≥–æ—Ç–∏–ø–æ–≤

### –†–∞–∑–º–µ—Ä—ã:
- Desktop: max 1920px width
- Mobile: max 768px width
- Thumbnails: max 400px width

### –°–µ—Ä–≤–∏—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- https://squoosh.app/
- https://tinypng.com/
- https://imageoptim.com/

---

Built with performance in mind ‚ö°
